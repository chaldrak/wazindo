<div class="animated fadeIn">
    <div class="row">
        <div class="col-md-12 mb-4">
            <!-- Nav tabs -->
            <div class="text-right mt-3 ">

                <button type="button" class="btn btn-light mr-1" (click)="goBack()">
                    <i class="fa fa-angle-double-left"></i>
                    <span>Retour</span>
                </button>


                <!-- <button type="button" class="btn btn-danger mr-1" (click)="rejetProjet()">
                <i class=" fa fa-close"></i>
                <span>Rejeter</span>
              </button> -->

                <!-- prevalider -->
                <button type="button" class="btn b2 mr-1" (click)="preValideProjet()">
                    <i class=" fa fa-check"></i>
                    <span>Valider</span>
                </button>

            </div>
            <tabset>
                <tab heading="Detail du Projet">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="titre">Titre du projet</label>
                                <input type="text" disabled="disabled" class="form-control" id="titre"
                                    [(ngModel)]="projet.titre_projet" placeholder="Titre du projet" />

                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Pays</label>
                                <input type="text" disabled="disabled" class="form-control" id="montant"
                                [(ngModel)]="projet.pays" placeholder="" />
                            </div>
                        </div>
                    </div>
                    <!--/.row-->
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="montant">Montant à Collecter</label>
                                <input type="text" disabled="disabled" class="form-control" id="montant"
                                    [(ngModel)]="projet.montant_collecter" placeholder="Montant à Collecter" />
                                <!-- [(ngModel)]="projet.montant_collecter"  -->
                            </div>
                        </div>
                        <div class="col-sm-6" *ngIf="isLocal">
                            <div class="form-group">

                                <label>Département</label>

                                <select class="form-control" disabled="disabled">
                                    <option value="">selectionner un Département</option>
                                    <!-- <option value="{{item.id}}"   *ngFor="let item of departementList">{{item.nom}}</option> -->
                                    <!-- [(ngModel)]="projet.departement" (ngModelChange)="getListCommuneByDepartement()" -->
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6" *ngIf="!isLocal">
                            <div class="form-group">
                                <label>Phrase d’accroche</label>
                                <textarea class="form-control" disabled="disabled" [(ngModel)]="projet.resume"
                                    maxlength="140" row='2'> </textarea>
                            </div>
                        </div>
                    </div>
                    <!--/.row-->
                    <div class="row">

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="montant">Durée de la collecte</label>
                                <input type="text" disabled="disabled" class="form-control" id="montant"
                                    [(ngModel)]="projet.duree_campagne" placeholder="" />
                            </div>
                        </div>
                        <div class="col-sm-6" *ngIf="isLocal">
                            <div class="form-group">
                                <label>Commune</label>

                                <select class="form-control" disabled="disabled">
                                    <option value="">Sélectionner une Commune</option>
                                    <!-- <option value="{{item.nom}}"   *ngFor="let item of communeList">{{item.nom}}</option> -->
                                    <!-- [(ngModel)]="projet.description_projet" -->
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6" *ngIf="!isLocal">
                            <div class="form-group">
                                <label>Présentation détaillée du projet</label>
                                <textarea class="form-control" disabled="disabled"
                                    [(ngModel)]="projet.description_projet" maxlength="200" row='3'> </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Catégorie du Projet</label>
                                <input type="text" disabled="disabled" class="form-control" id="montant"
                                [(ngModel)]="projet.categorie" placeholder="" />
                            </div>
                        </div>
                        <div class="col-sm-6" *ngIf="isLocal">
                            <div class="form-group">
                                <label>Phrase d’accroche</label>
                                <textarea class="form-control" disabled="disabled" [(ngModel)]="projet.resume"
                                    maxlength="140" row='2'> </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 offset-6" *ngIf="isLocal">
                            <div class="form-group">
                                <label>Présentation détaillée du projet</label>
                                <textarea class="form-control" [(ngModel)]="projet.description" maxlength="200"
                                    row='3'> </textarea>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-header finance">
                                    <div class="row">
                                        <div class="col-sm-6 header_text">
                                            Lignes à Financer
                                        </div>

                                    </div>

                                </div>
                                <div class="card-body">
                                    <table class="table table-bordered table-striped table-sm">
                                        <thead>
                                            <tr>
                                                <th>Ligne à financer</th>
                                                <th>Montant</th>
                                                <th>Commentaire</th>
                                                <th>Date de mise en oeuvre</th>
                                                <th>Deadline</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of listFinance;">
                                                <td>{{item.ligne_financer}}</td>
                                                <td>{{item.montant}}</td>
                                                <td>{{item.commentaire}}</td>
                                                <td>{{item.date_mise_en_oeuvre}}</td>
                                                <td>{{item.deadline}}</td>
                                                <td> <button type="button" class="btn btn-danger mr-1"
                                                        (click)="deleteLigneFinance(item.id)">
                                                        <i class="fa fa-trash"></i>
                                                    </button></td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>

                            </div>
                        </div>
                    </div>
                    <ng-template #content let-modal>

                        <div class="modal-header" style="background-color:#0533FB; color:white;">
                            <h4 class="modal-title" id="modal-basic-title">Ligne à Financer</h4>
                            <button type="button" class="close" (click)="modal.dismiss('Cross click')"
                                aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">

                            <form>
                                <div class="row">
                                    <div class="col-sm-6">

                                        <div class="form-group">
                                            <label for="ligne">Ligne à Financer</label>
                                            <input type="texte" id="ligne" name="ligne"
                                                [(ngModel)]="finance.ligne_financer" disabled="disabled"
                                                class="form-control" placeholder="Ligne à Financer">
                                            <!-- <span class="help-block">Please enter your email</span> -->
                                        </div>
                                        <div class="form-group">
                                            <label for="commentaire">Commentaire</label>
                                            <textarea id="commentaire" disabled="disabled" name="commentaire" rows="3"
                                                [(ngModel)]="finance.commentaire" class="form-control"
                                                placeholder="Commentaire"></textarea>
                                        </div>

                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="montant">Montant</label>
                                            <input type="number" id="montant" disabled="disabled" name="montant"
                                                [(ngModel)]="finance.montant" class="form-control"
                                                placeholder="Montant">
                                        </div>
                                        <div class="form-group">
                                            <label for="date">Date Mise en oeuvre</label>
                                            <input class="form-control" disabled="disabled" id="date_oeuvre" type="date"
                                                [(ngModel)]="finance.date_mise_en_oeuvre" name="date"
                                                placeholder="date">
                                        </div>
                                        <div class="form-group">
                                            <label for="date">Deadline</label>
                                            <input class="form-control" disabled="disabled" id="date"
                                                type="date_deadline" [(ngModel)]="finance.deadline" name="date"
                                                placeholder="date">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger"
                                (click)="modal.dismiss('Cross click')">Annuler</button>
                            <button type="button" class="btn btn-primary" (click)="saveFinance()">Enregistrer</button>
                        </div>
                        <!--"modal.close('Save click')" -->
                    </ng-template>

                    <div class="modal-footer">
                        <!-- <button type="button" class="btn b1 mr-1" (click)="saveProjetUpdated()">
                            <i class=" fa fa-check"></i>
                            <span>Enregistrer</span>
                        </button> -->
                    </div>
                </tab>
                <tab heading="Document du Projet">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <!-- <label class="col-sm-3 col-form-label" maxlength="600">Identité du Porteur du projet</label>
                                <div class="col-sm-9">
                                    <input type="text" readonly class="form-control" [(ngModel)]="dataUserIdentite" />
                                </div> -->

                                <label class="col-sm-3 col-form-label">Image</label>
                                <div class="col-sm-9">
                                    <input *ngIf="image" #file type="file" accept='image/*'
                                        (change)="previewDocument(file.files)" />
                                    <div class="col-md-6 offset-3">
                                        <img [src]="imageURL" height="300" width="auto" *ngIf="imageURL">

                                    </div>
                                    <div class="col-md-6 offset-3">
                                        <img src="../../../../assets/warning.png" height="auto" width="auto"
                                            *ngIf="!imageURL">

                                    </div>

                                    <div class="col-md-6 offset-3">

                                        <button type="submit" *ngIf="imageURL" class="btn btn-primary mdi mdi-upload"
                                            (click)="savePropositionProjet()"> Ajouter l’image du projet </button>

                                    </div>


                                    <div class="col-md-6 offset-3">
                                        <span style="color:red;" *ngIf="imageURL">{{message}}</span>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn b1 mr-1" (click)="saveDocument()">
                            <i class=" fa fa-check"></i>
                            <span>Enregistrer</span>
                        </button> -->
                    </div>
                </tab>
                <tab heading="Biographie">

                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">

                                <div class="col-sm-6">
                                    <div class="card">
                                        <div class="card-header finance">
                                            <strong>Statut juridique du créateur</strong>
                                        </div>
                                        <div class="card-body">

                                            <div class="form-group">
                                                <div class="form-check">
                                                    <input type="radio" class="form-check-input" disabled="disabled"
                                                        name="membershipRadios" id="membershipRadios1" value=""
                                                        checked />
                                                    <label class="form-check-label" for="membershipRadios1"> Startup
                                                        (au
                                                        moins 3 personnes) </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="radio" class="form-check-input" disabled="disabled"
                                                        name="membershipRadios" id="membershipRadios1" value=""
                                                        checked />
                                                    <label class="form-check-label" for="membershipRadios1">
                                                        Entreprise
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="radio" class="form-check-input" disabled="disabled"
                                                        name="membershipRadios" id="membershipRadios1" value=""
                                                        checked />
                                                    <label class="form-check-label" for="membershipRadios1">
                                                        Association
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="radio" class="form-check-input" disabled="disabled"
                                                        name="membershipRadios" id="membershipRadios1" value=""
                                                        checked />
                                                    <label class="form-check-label" for="membershipRadios1">
                                                        Collectivité locale </label>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="card">
                                        <div class="card-header finance">
                                            <strong>Documents administratifs</strong>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="form-group row">
                                                        <label> Pour les startups ou groupements (copies de pièce
                                                            d'identité des trois (3) membres du groupe)</label>
                                                        <input type="file" *ngIf="image" class="form-control"
                                                            accept=".docx,.pdf"
                                                            (change)="envoiFichier($event.target.files)" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="form-group row">
                                                        <label> Pour les entreprises et associations (preuves
                                                            d'immatriculation et copie de pièce d'identité du
                                                            représentant légal) </label>
                                                        <input *ngIf="image" type="file" class="form-control"
                                                            accept=".docx,.pdf"
                                                            (change)="envoiFichier($event.target.files)" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-header finance">
                                    <strong>Adresses</strong>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="name">Résidence/Siège</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="residence" placeholder="Résidence">
                                            </div>
                                        </div>


                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="name">Adresse Email</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="adresse_email" placeholder="Adresse Email">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label for="name">Téléphone</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="telephone" placeholder="Téléphone">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-header finance">
                                    <strong>Réseaux Sociaux</strong>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="name">Facebook</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="facebook" placeholder="Lien Facebook">
                                            </div>

                                        </div>

                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="name">Twitter</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="twitter" placeholder="Lien Twitter">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="name">Youtube</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="youtube" placeholder="Lien Youtube">
                                            </div>
                                        </div>

                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="name">Linkedln</label>
                                                <input type="text" disabled="disabled" maxlength="600"
                                                    class="form-control" id="linkedin" placeholder="Lien Linkedln">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label for="ccnumber">Qui suis-je? (Biographie sommaire)</label>
                                        <input type="text" disabled="disabled" class="form-control" id="ccnumber"
                                            placeholder="Biographie sommaire">
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Image</label>
                                        <div>
                                            <input *ngIf="image" #file type="file" accept='image/*'
                                                (change)="previewBiblio(file.files)" />
                                            <div class="col-md-6 offset-3">
                                                <img [src]="imageBiblio" height="300" width="auto" *ngIf="imageBiblio">

                                            </div>
                                            <div class="col-md-6 offset-3">
                                                <img src="../../../../assets/warning.png" height="auto" width="auto"
                                                    *ngIf="!imageBiblio">

                                            </div>

                                            <div class="col-md-6 offset-3">

                                                <button type="submit" *ngIf="imageBiblio"
                                                    class="btn btn-primary mdi mdi-upload"
                                                    (click)="savePropositionProjet()"> Ajouter l’image du projet
                                                </button>

                                            </div>


                                            <div class="col-md-6 offset-3">
                                                <span style="color:red;" *ngIf="imageBiblio">{{message}}</span>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn b1 mr-1" (click)="saveProjetUpdated()">
                            <i class=" fa fa-check"></i>
                            <span>Enregistrer</span>
                        </button> -->
                    </div>
                </tab>
                <tab heading="Contreparties">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-header finance">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            Liste des Contreparties
                                        </div>

                                    </div>

                                </div>
                                <div class="card-body">
                                    <table class="table table-bordered table-striped table-sm">
                                        <thead>
                                            <tr>
                                                <th>Montant</th>
                                                <th>Description</th>
                                                <th>Image de la contrepartie</th>
                                                <th>Quantité limitée</th>
                                                <th>Date de livraison estimée</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of listContrepartie;">
                                                <td>{{item.mt_max}}</td>
                                                <td>{{item.description}}</td>
                                                <td>{{item.image}}</td>
                                                <td>{{item.est_illimite}}</td>
                                                <td>{{item.date_liv_est}}</td>
                                                <td>
                                                    <button type="button" class="btn btn-danger mr-1"
                                                        (click)="deleteContrepartie(item.id)">
                                                        <i class="fa fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>

                            </div>
                        </div>
                    </div>
                    <ng-template #contrepartie let-modal>

                        <div class="modal-header" style="background-color:0533FB; color:white;">
                            <h4 class="modal-title" id="modal-basic">Liste des Contreparties</h4>
                            <button type="button" class="close" (click)="modal.dismiss('Cross click')"
                                aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">

                            <form>
                                <div class="row">
                                    <div class="col-sm-6">

                                        <div class="form-group">
                                            <label for="montant">Montant</label>
                                            <input type="number" id="montant" name="montant"
                                                [(ngModel)]="projet.montant" class="form-control" placeholder="Montant">
                                        </div>
                                        <div class="form-group">
                                            <label for="commentaire">description</label>
                                            <textarea id="commentaire" name="commentaire" rows="3"
                                                [(ngModel)]="projet.description" class="form-control"
                                                placeholder="Commentaire"></textarea>
                                        </div>

                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="date">Date de Livraison</label>
                                            <input class="form-control" id="date" type="date"
                                                [(ngModel)]="projet.date_livraison" name="date" placeholder="date">
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox"
                                                [(ngModel)]="projet.quantite" name='limit' value="option1"
                                                id="checkbox1">
                                            <label class="form-check-label" for="checkbox1">
                                                Quantité limitée
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label>Image de la contrepartie</label>
                                            <div>
                                                <input #file type="file" accept='image/*'
                                                    (change)="previewContrepartie(file.files)" />
                                                <div class="col-md-6 offset-3">
                                                    <img [src]="imageContre" height="300" width="auto"
                                                        *ngIf="imageContre">

                                                </div>

                                                <div class="col-md-6 offset-3">

                                                    <button type="submit" *ngIf="imageContre"
                                                        class="btn btn-primary mdi mdi-upload"
                                                        (click)="savePropositionProjet()"> Ajouter l’image du projet
                                                    </button>

                                                </div>
                                                <div class="col-md-6 offset-3">
                                                    <span style="color:red;" *ngIf="imageContre">{{message}}</span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger"
                                (click)="modal.dismiss('Cross click')">Annuler</button>
                            <button type="button" class="btn btn-primary"
                                (click)="saveContrepartie()">Enregistrer</button>
                        </div>
                        <!--"modal.close('Save click')" -->
                    </ng-template>
                    <!-- <div class="modal-footer">
                        <button type="button" class="btn b1 mr-1" (click)="updateContrepartie()">
                            <i class=" fa fa-check"></i>
                            <span>Enregistrer</span>
                          </button>                     </div> -->
                </tab>
            </tabset>
        </div>

    </div>
    <!--/.row-->
</div>



<ngx-spinner></ngx-spinner>